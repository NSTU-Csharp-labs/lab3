using System;using System.Collections.Generic;using System.IO;using System.Xml.Serialization;using lab3.Controls.GL;namespace lab3.Serialization;public class FilterSerializer : IFilterSerializer{    private readonly string _pathToFile;    private readonly XmlSerializer _serializer;    public FilterSerializer(string pathToFile)    {        _pathToFile = pathToFile;        _serializer = new XmlSerializer(typeof(Filter[]));    }    public IEnumerable<Filter> LoadFilters()    {        IEnumerable<Filter>? manager = null;        var s = GenerateStreamFromString(File.ReadAllText(_pathToFile));        try        {            manager = (Filter[])_serializer.Deserialize(s)!;        }        catch (Exception e)        {            manager = new List<Filter>();        }        //переделать        finally        {            manager ??= new List<Filter>();            s.Close();        }        return manager;    }    private static Stream GenerateStreamFromString(string s)    {        var stream = new MemoryStream();        var writer = new StreamWriter(stream);        writer.Write(s);        writer.Flush();        stream.Position = 0;        return stream;    }}